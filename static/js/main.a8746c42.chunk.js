(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){e.exports=a(310)},153:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(61),c=a.n(l),i=(a(153),a(86)),o=a.n(i),m=a(130),u=a(13),s=a(64),h=a(65),p=a(72),d=a(66),f=a(71),b=a(131),y=a.n(b),v=(a(175),function(e){if(!e.length)return null;var t=e.map(function(e){return e.price_sqm}).reduce(function(e,t){return e+t}),a=e.filter(function(e){return!e.price_sqm});return t/(e.length-a.length)}),g=a(147),_=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=[];a="balcony"===t?e.filter(function(e){return e.balcony>0}):e.filter(function(e){return e.description&&e.description.includes(t)}),n=Object(u.a)(n).concat(Object(u.a)(a))},m=a[Symbol.iterator]();!(r=(i=m.next()).done);r=!0)o()}catch(s){l=!0,c=s}finally{try{r||null==m.return||m.return()}finally{if(l)throw c}}return n},E=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=e.filter(function(e){return e.room_count===parseInt(t)});n=Object(u.a)(n).concat(Object(u.a)(a))},m=a[Symbol.iterator]();!(r=(i=m.next()).done);r=!0)o()}catch(s){l=!0,c=s}finally{try{r||null==m.return||m.return()}finally{if(l)throw c}}return n},O=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=parseInt(t),r=t.substr(4),l=[];if(r)l=e.filter(function(e){return"<"===r?e.built_year<a:e.built_year>a});else{var c=a+20;l=e.filter(function(e){return e.built_year>=a&&e.built_year<c})}n=Object(u.a)(n).concat(Object(u.a)(l))},m=a[Symbol.iterator]();!(r=(i=m.next()).done);r=!0)o()}catch(s){l=!0,c=s}finally{try{r||null==m.return||m.return()}finally{if(l)throw c}}return n},j=function(e,t){var a=t=(t=t.toLowerCase().trim()).split(" "),n=Object(g.a)(a,2),r=n[0],l=n[1];if(l)return e.filter(function(e){return e.street.toLowerCase()===r&&e.street_number.toString()===l});var c=r.length;return e.filter(function(e){return e.street.toLowerCase().substr(0,c)===r})},k=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||200,e.filter(function(e){return e.size_sqm>=n&&e.size_sqm<=r})},w=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||Math.pow(10,7),e.filter(function(e){return e.size_sqm*e.price_sqm>=n&&e.size_sqm*e.price_sqm<=r})},x=E,C=O,S=_,q=function(e,t){var a=t.length,n=Object(u.a)(t),r=_(e,[],["balcony"]).length,l=e.length;return a?(n[0].value=_(e,[],["balcony"]).length,n[1].value=e.length-n[0].value):(n.push({name:"balcony",value:r}),n.push({name:"no balcony",value:l-r})),n},F=function(e,t,a){for(var n=t.length,r=Object(u.a)(t),l=Object(u.a)(a),c=1;c<6;c++){var i=E(e,[],[c]),o=i.length;n?(r[c-1].value=o,l[c-1].price_sqm=v(i)):(r.push({name:"#".concat(c," room(s)"),value:o}),l.push({name:"#".concat(c," room(s)"),price_sqm:v(i)}))}return{copy_rooms:r,copy_price_room:l}},z=function(e,t,a){for(var n=t.length,r=Object(u.a)(t),l=a.year,c=a.opts,i=0;i<l.length;i++){var o=O(e,[],[l[i].id]);if(n){var m=r[i],s=!0,h=!1,p=void 0;try{for(var d,f=c[Symbol.iterator]();!(s=(d=f.next()).done);s=!0)m[k=d.value.id]=_(o,[],[k]).length}catch(w){h=!0,p=w}finally{try{s||null==f.return||f.return()}finally{if(h)throw p}}}else{var b={name:l[i].label},y=!0,v=!1,g=void 0;try{for(var E,j=c[Symbol.iterator]();!(y=(E=j.next()).done);y=!0){var k;b[k=E.value.id]=_(o,[],[k]).length}}catch(w){v=!0,g=w}finally{try{y||null==j.return||j.return()}finally{if(v)throw g}}r.push(b)}}return r},N=function(e,t){var a=t.length,n=Object(u.a)(t),r={},l=!0,c=!1,i=void 0;try{for(var o,m=e[Symbol.iterator]();!(l=(o=m.next()).done);l=!0){var s=o.value,h=s.street,p=s.street_number,d=s.price_sqm,f=s.size_sqm,b="".concat(h," ").concat(p),y=Math.round(f*d);r.hasOwnProperty(b)||(r[b]=[]),r[b].push(y)}}catch(j){c=!0,i=j}finally{try{l||null==m.return||m.return()}finally{if(c)throw i}}var v=Object.values(r),g=Object.keys(r);a&&(n.length=0);for(var _=0;_<v.length;_++){var E=Math.max.apply(Math,Object(u.a)(v[_])),O=Math.min.apply(Math,Object(u.a)(v[_]));n.push({name:g[_],min_price:O,max_price:E})}return n},I={loc:{name:"location",label:"Location",id:"location",placeholder:"Sunantie 14"},area:[{name:"size_sqm",placeholder:"min",id:"size_sqm_min",className:"min"},{name:"size_sqm",placeholder:"max",id:"size_sqm_max",className:"max"}],aprt_price:[{name:"price",placeholder:"min",id:"price_min",className:"min"},{name:"price",placeholder:"max",id:"price_max",className:"max"}],year:[{name:"built_year",label:"< 1970",id:"1970<"},{name:"built_year",label:"1970 - 1989",id:"1970"},{name:"built_year",label:"1990 - 2009",id:"1990"},{name:"built_year",label:"> 2010",id:"2010>"}],rooms:[{name:"room_count",label:"1R",id:"1"},{name:"room_count",label:"2R",id:"2"},{name:"room_count",label:"3R",id:"3"},{name:"room_count",label:"4R",id:"4"},{name:"room_count",label:"5R",id:"5"}],opts:[{name:"options",label:"Balcony",id:"balcony"},{name:"options",label:"Terrace",id:"terassi"},{name:"options",label:"Storage",id:"vh"},{name:"options",label:"Open-kitchen",id:"avok"},{name:"options",label:"Kitchenette",id:"kk"}]},K=a(132),R=a(34),M=a(38),A=(a(177),function(e){var t=e.name,a=e.id,l=e.label,c=e.checked,i=e.handleCheck;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"checkbox",name:t,id:a,checked:c,onChange:function(e){return i(e,a)}}),r.a.createElement("label",{htmlFor:a},l),r.a.createElement("br",null))}),B=function(e){var t=e.name,a=e.id,l=e.className,c=e.placeholder,i=e.label,o=e.value,m=e.onChange;if(["min","max"].includes(c)){var u=o,s=u.min,h=u.max;o="min"===c?s:h}return r.a.createElement(n.Fragment,null,i&&r.a.createElement("p",null,i),r.a.createElement("input",{type:"text",name:t,id:a&&a,className:l&&l,value:o,placeholder:c,onChange:function(e){return m(e,l)}}))},D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){var n=e.target,r=n.name,l=n.value,c=Object(M.a)(Object(M.a)(a)).state;switch(r){case"location":a.setState(Object(R.a)({},r,l));break;default:a.setState(Object(R.a)({},r,Object(K.a)({},c[r],Object(R.a)({},t,l))))}},a.handleCheck=function(e,t){var n=e.target,r=n.name,l=n.checked,c=Object(M.a)(Object(M.a)(a)).state;if(l)a.setState(Object(R.a)({},r,Object(u.a)(c[r]).concat([t])));else{var i=Object(u.a)(c[r]),o=i.indexOf(t);i.splice(o,1),a.setState(Object(R.a)({},r,i))}},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.filter)(a.state)},a.state={location:"",room_count:[],built_year:[],size_sqm:{min:"",max:""},price:{min:"",max:""},options:[]},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=I.loc,a=I.area,l=I.aprt_price,c=I.year,i=I.rooms,o=I.opts,m=this.state,u=m.location,s=m.size_sqm,h=m.price;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(B,Object.assign({},t,{value:u,onChange:this.handleChange})),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Number of rooms:"),r.a.createElement("div",{className:"flex"},i.map(function(t,a){return r.a.createElement(A,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Built year:"),r.a.createElement("div",null,c.map(function(t,a){return r.a.createElement(A,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Area:"),r.a.createElement("div",{className:"grid"},a.map(function(t,a){return r.a.createElement(B,Object.assign({key:a},t,{value:s,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Price:"),r.a.createElement("div",{className:"grid"},l.map(function(t,a){return r.a.createElement(B,Object.assign({key:a},t,{value:h,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Other options:"),r.a.createElement("div",null,o.map(function(t,a){return r.a.createElement(A,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",value:"Search data"})))}}]),t}(n.PureComponent),L=a(312),P=a(317),J=a(306),W=a(311),T=function(e){var t=e.balcony,a=e.rooms;return r.a.createElement(L.a,{width:"100%",height:300},r.a.createElement(P.a,{width:800,height:300},r.a.createElement(J.a,{isAnimationActive:!1,data:t,dataKey:"value",cx:"35%",cy:150,outerRadius:60,fill:"#8884d8",label:!0}),r.a.createElement(J.a,{isAnimationActive:!1,data:a,dataKey:"value",cx:"35%",cy:150,outerRadius:90,innerRadius:70,fill:"#82ca9d",label:!0}),r.a.createElement(W.a,null)))},$=a(313),G=a(314),H=a(62),Q=a(63),U=a(307),V=a(129),X=function(e){var t=e.data,a=e.opts,n=["#17becf","#82ca9d","#FFBB28","#8884d8","#FF8042"];return r.a.createElement(L.a,{width:"100%",height:350},r.a.createElement($.a,{width:480,height:350,data:t,margin:{top:50,right:0,left:0,bottom:0}},r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,null),r.a.createElement(W.a,null),a.map(function(e,t){return r.a.createElement(U.a,{key:t,dataKey:e.id,stackId:"a",fill:n[t]})}),r.a.createElement(V.a,{wrapperStyle:{left:"25%",display:"flex"}})))},Y=a(315),Z=a(308),ee=function(e){var t=e.data;return r.a.createElement(L.a,{width:"100%",height:350},r.a.createElement(Y.a,{width:570,height:350,data:t,margin:{top:60,right:30,left:50,bottom:5}},r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,null),r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(W.a,null),r.a.createElement(V.a,{wrapperStyle:{left:"35%"}}),r.a.createElement(Z.a,{type:"monotone",dataKey:"price_sqm",stroke:"#17becf",activeDot:{r:9}})))},te=a(316),ae=a(309),ne=function(e){var t=e.data;return r.a.createElement(L.a,{width:"100%",height:300},r.a.createElement(te.a,{width:590,height:300,data:t,margin:{top:25,right:50,left:0,bottom:0}},r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,null),r.a.createElement(W.a,null),r.a.createElement(ae.a,{type:"monotone",dataKey:"min_price",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),r.a.createElement(ae.a,{type:"monotone",dataKey:"max_price",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})))},re=j,le=k,ce=w,ie=x,oe=C,me=S,ue=q,se=F,he=z,pe=N,de=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleFilter=function(e){var t=a.state,n=t.apartments,r=t.balcony,l=t.years,c=t.rooms,i=t.price_room,o=t.price_loc,m=Object(u.a)(a.original),s=[],h=e.location,p=e.room_count,d=e.built_year,f=e.size_sqm,b=e.price,y=e.options;h&&(s=re(m,h)),(f.min||f.max)&&(s=le(m,s,f)),(b.min||b.max)&&(s=ce(m,s,b)),p.length&&(s=ie(m,s,p)),d.length&&(s=oe(m,s,d)),y.length&&(s=me(m,s,y));var v=Object(u.a)(n);v.push(s);var g=ue(s,r),_=se(s,c,i),E=_.copy_rooms,O=_.copy_price_room,j=he(s,l,I),k=pe(s,o);a.setState({apartments:v,balcony:g,rooms:E,years:j,price_room:O,price_loc:k})},a.state={apartments:[],balcony:[],rooms:[],years:[],price_room:[],price_loc:[],loading:!0},a.original=[],a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(o.a.mark(function e(){var t,a,n,r,l,c,i,m,s,h,p,d,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",e.next=3,y.a.post("https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",{who_rules:"kodit.io"});case 3:t=e.sent,this.original=Object(u.a)(this.original).concat(Object(u.a)(t.data)),a=this.state,n=a.balcony,r=a.rooms,l=a.years,c=a.price_room,i=a.price_loc,m=ue(this.original,n),s=se(this.original,r,c),h=s.copy_rooms,p=s.copy_price_room,d=he(this.original,l,I),f=pe(this.original,i),this.setState({loading:!1,balcony:m,rooms:h,years:d,price_room:p,price_loc:f});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balcony,a=e.rooms,n=e.years,l=e.price_room,c=e.price_loc,i=I.opts;return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(D,{filter:this.handleFilter})),r.a.createElement("div",null,r.a.createElement(T,{balcony:t,rooms:a}),r.a.createElement(ne,{data:c}),r.a.createElement(X,{data:n,opts:i}),r.a.createElement(ee,{data:l})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.a8746c42.chunk.js.map