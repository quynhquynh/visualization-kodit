(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){e.exports=a(310)},153:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(64),i=a.n(c),l=(a(153),a(88)),o=a.n(l),u=a(132),m=a(27),s=a(13),h=a(65),d=a(66),p=a(74),b=a(67),f=a(73),v=a(133),g=a.n(v),y=(a(175),function(e){if(!e.length)return null;var t=e.map(function(e){return e.price_sqm}).reduce(function(e,t){return e+t}),a=e.filter(function(e){return!e.price_sqm});return t/(e.length-a.length)}),O=a(72),E=function(e,t){return t.reduce(function(t,a){var n=e.filter(function(e){return"balcony"===a?e.balcony:e.description&&e.description.includes(a)});return t.push.apply(t,Object(s.a)(n)),t},[])},j=function(e,t){return t.reduce(function(t,a){var n=e.filter(function(e){return e.room_count===parseInt(a)});return t.push.apply(t,Object(s.a)(n)),t},[])},_=function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var i,l=function(){var t=i.value,n=parseInt(t),r=t.substr(4),c=[];if(r)c=e.filter(function(e){return"<"===r?e.built_year<n:e.built_year>n});else{var l=n+20;c=e.filter(function(e){return e.built_year>=n&&e.built_year<l})}a=Object(s.a)(a).concat(Object(s.a)(c))},o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)l()}catch(u){r=!0,c=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a},k=[{name:"location",label:"Location",id:"location",placeholder:"Vallikatu"}],x=[{name:"size_sqm",placeholder:"min",id:"size_sqm_min",className:"min"},{name:"size_sqm",placeholder:"max",id:"size_sqm_max",className:"max"}],w=[{name:"price",placeholder:"min",id:"price_min",className:"min"},{name:"price",placeholder:"max",id:"price_max",className:"max"}],C=[{name:"built_year",label:"< 1970",id:"1970<"},{name:"built_year",label:"1970 - 1989",id:"1970"},{name:"built_year",label:"1990 - 2009",id:"1990"},{name:"built_year",label:"> 2010",id:"2010>"}],S=[{name:"room_count",label:"1R",id:"1"},{name:"room_count",label:"2R",id:"2"},{name:"room_count",label:"3R",id:"3"},{name:"room_count",label:"4R",id:"4"},{name:"room_count",label:"5R",id:"5"}],q=[{name:"options",label:"Balcony",id:"balcony"},{name:"options",label:"Terrace",id:"terassi"},{name:"options",label:"Storage",id:"vh"},{name:"options",label:"Open-kitchen",id:"avok"},{name:"options",label:"Kitchenette",id:"kk"}],F=function(e,t){var a=[],n=t.location,r=t.room_count,c=t.built_year,i=t.size_sqm,l=t.price,o=t.options;return n&&(a=function(e,t){var a=t=(t=t.toLowerCase().trim()).split(" "),n=Object(O.a)(a,2),r=n[0],c=n[1];if(c)return e.filter(function(e){return e.street.toLowerCase()===r&&e.street_number.toString()===c});var i=r.length;return e.filter(function(e){return e.street.toLowerCase().substr(0,i)===r})}(e,n)),(i.min||i.max)&&(a=function(e,t){var a=t.min,n=t.max;return console.log("min",a),console.log("max",n),a=parseInt(a)||0,n=parseInt(n)||200,e.filter(function(e){return e.size_sqm>=a&&e.size_sqm<=n})}(a.length?a:e,i)),(l.min||l.max)&&(a=function(e,t){var a=t.min,n=t.max;return a=parseInt(a)||0,n=parseInt(n)||Math.pow(10,7),e.filter(function(e){return e.size_sqm*e.price_sqm>=a&&e.size_sqm*e.price_sqm<=n})}(a.length?a:e,l)),r.length&&(a=j(a.length?a:e,r)),c.length&&(a=_(a.length?a:e,c)),o.length&&(a=E(a.length?a:e,o)),a},z=function(e){return Object.values(e).map(function(e,t){return e.constructor===String?!!e:e.constructor===Array?!!e.length:!(!e.min&&!e.max)}).every(function(e){return!e})},N=function(e,t){var a=t.balcony,n=t.rooms,r=t.years,c=t.price_loc;return{balcony:function(e,t){var a=E(e,["balcony"]).length,n=e.length,r=t.length,c=r?[Object(m.a)({},t[0]),Object(m.a)({},t[1])]:[{name:"balcony"},{name:"no balcony"}],i=Object(O.a)(c,2),l=i[0],o=i[1];return l.value=a,o.value=n-a,r?[l,o]:Object(s.a)(t).concat([l,o])}(e,a),rooms:function(e,t){var a=t.length,n=S.map(function(n,r){var c=j(e,[r+1]),i=c.length,l=a?Object(m.a)({},t[r]):{name:"#".concat(r+1," room(s)")};return l.value=i,l.price_sqm=y(c),l});return a?n:Object(s.a)(t).concat(Object(s.a)(n))}(e,n),years:function(e,t){var a=C,n=q,r=t.length,c=a.map(function(a,c){var i=_(e,[a.id]),l=r?Object(m.a)({},t[c]):{name:a.label};return n.map(function(e){var t=e.id;return l[t]=E(i,[t]).length}),l});return r?c:Object(s.a)(t).concat(Object(s.a)(c))}(e,r),price_loc:function(e,t){var a={};e.map(function(e){var t=e.street,n=e.street_number,r=e.price_sqm,c=e.size_sqm,i="".concat(t," ").concat(n),l=Math.round(c*r);return a.hasOwnProperty(i)||(a[i]=[]),a[i].push(l)});var n=Object.keys(a),r=Object.values(a),c=t.length,i=r.map(function(e,a){var r=c?Object(m.a)({},t[a]):{name:n[a]};return r.max_price=Math.max.apply(Math,Object(s.a)(e)),r.min_price=Math.min.apply(Math,Object(s.a)(e)),r});return c?i:Object(s.a)(t).concat(Object(s.a)(i))}(e,c)}},I=a(37),K=a(41),L=(a(177),function(e){var t=e.name,a=e.id,c=e.className,i=e.placeholder,l=e.value,o=e.handleChange;if(["min","max"].includes(i)){var u=l,m=u.min,s=u.max;l="min"===i?m:s}return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"text",name:t,id:a&&a,className:c&&c,value:l,placeholder:i,onChange:function(e){return o(e,c)}}))}),M=function(e){var t=e.name,a=e.id,c=e.label,i=e.checked,l=e.handleCheck;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"checkbox",name:t,id:a,checked:i,onChange:function(e){return l(e,a)}}),r.a.createElement("label",{htmlFor:a},c),r.a.createElement("br",null))},R=function(e){var t=e.p,a=e.arr,c=e.value,i=e.className,l=e.handleChange,o=e.handleCheck;return r.a.createElement(n.Fragment,null,r.a.createElement("p",null,t),r.a.createElement("div",{className:i&&i},a.map(function(e,t){return l?r.a.createElement(L,Object.assign({key:t},e,{value:c,handleChange:l})):r.a.createElement(M,Object.assign({key:t},e,{handleCheck:o}))})))},A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=function(e,t){var n=e.target,r=n.name,c=n.value,i=Object(K.a)(Object(K.a)(a)).state;switch(r){case"location":a.setState(Object(I.a)({},r,c));break;default:a.setState(Object(I.a)({},r,Object(m.a)({},i[r],Object(I.a)({},t,c))))}},a.handleCheck=function(e,t){var n=e.target,r=n.name,c=n.checked,i=Object(K.a)(Object(K.a)(a)).state;if(c)a.setState(Object(I.a)({},r,Object(s.a)(i[r]).concat([t])));else{var l=Object(s.a)(i[r]),o=l.indexOf(t);l.splice(o,1),a.setState(Object(I.a)({},r,l))}},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.filter)(a.state)},a.state={location:"",room_count:[],built_year:[],size_sqm:{min:"",max:""},price:{min:"",max:""},options:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=k,t=x,a=w,c=C,i=S,l=q,o=this.state,u=o.location,m=o.size_sqm,s=o.price,h=this.handleChange,d=this.handleCheck,p=[{p:"Location:",arr:e,value:u,handleChange:h},{p:"Number of rooms:",arr:i,className:"flex",handleCheck:d},{p:"Built year:",arr:c,handleCheck:d},{p:"Area:",arr:t,className:"grid",value:m,handleChange:h},{p:"Price:",arr:a,className:"grid",value:s,handleChange:h},{p:"Other options",arr:l,handleCheck:d}];return r.a.createElement("form",{onSubmit:this.handleSubmit},p.map(function(e,t){return r.a.createElement(R,Object.assign({key:t},e))}),r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",value:"Search data"})))}}]),t}(n.PureComponent),B=a(312),D=a(317),P=a(306),J=a(311),W=Math.PI/180,T=function(e){var t=e.cx,a=e.cy,n=e.midAngle,c=e.innerRadius,i=e.outerRadius,l=e.percent,o=(e.index,c+.5*(i-c)),u=t+o*Math.cos(-n*W),m=a+o*Math.sin(-n*W),s=parseInt((100*l).toFixed(0)),h=s?"".concat(s,"%"):"";return r.a.createElement("text",{x:u,y:m,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},h)},V=function(e){var t=e.balcony,a=e.rooms;return r.a.createElement(B.a,{width:"100%",height:300},r.a.createElement(D.a,{width:800,height:300},r.a.createElement(P.a,{isAnimationActive:!1,data:t,dataKey:"value",outerRadius:70,fill:"#8884d8",labelLine:!1,label:T}),r.a.createElement(P.a,{isAnimationActive:!1,data:a,dataKey:"value",outerRadius:95,innerRadius:75,fill:"#82ca9d",label:!0}),r.a.createElement(J.a,null)))},$=a(313),G=a(314),H=a(35),Q=a(36),U=a(307),X=a(131),Y=function(e){var t=e.data,a=e.opts,n=["#17becf","#82ca9d","#FFBB28","#8884d8","#FF8042"];return r.a.createElement(B.a,{width:"100%",height:350},r.a.createElement($.a,{width:480,height:350,data:t,margin:{top:50,right:0,left:0,bottom:0}},r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,null),r.a.createElement(J.a,null),a.map(function(e,t){return r.a.createElement(U.a,{key:t,dataKey:e.id,stackId:"a",fill:n[t]})}),r.a.createElement(X.a,{wrapperStyle:{left:"25%",display:"flex"}})))},Z=a(315),ee=a(308),te=function(e){var t=e.data;return r.a.createElement(B.a,{width:"100%",height:350},r.a.createElement(Z.a,{width:570,height:350,data:t,margin:{top:60,right:30,left:15,bottom:5}},r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,{tickFormatter:function(e){return e.toLocaleString()}}),r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(J.a,{formatter:function(e){return e.toFixed(1).toLocaleString()}}),r.a.createElement(X.a,{wrapperStyle:{left:"35%"}}),r.a.createElement(ee.a,{type:"monotone",dataKey:"price_sqm",stroke:"#17becf",activeDot:{r:9}})))},ae=a(316),ne=a(309),re=function(e){var t=e.data;return r.a.createElement(B.a,{width:"100%",height:300},r.a.createElement(ae.a,{width:590,height:300,data:t,margin:{top:25,right:40,left:20,bottom:0}},r.a.createElement(G.a,{strokeDasharray:"3 3"}),r.a.createElement(H.a,{dataKey:"name"}),r.a.createElement(Q.a,{tickFormatter:function(e){return e.toLocaleString()}}),r.a.createElement(J.a,{formatter:function(e){return e.toLocaleString()}}),r.a.createElement(ne.a,{type:"monotone",dataKey:"min_price",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),r.a.createElement(ne.a,{type:"monotone",dataKey:"max_price",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})))},ce=F,ie=z,le=N,oe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleFilter=function(e){var t=Object(s.a)(a.original),n=ie(e)?t:ce(t,e);a.setState(Object(m.a)({},le(n,a.state)))},a.state={balcony:[],rooms:[],years:[],price_loc:[],loading:!0},a.original=[],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){var t,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",e.next=3,g.a.post("https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",{who_rules:"kodit.io"});case 3:t=e.sent,this.original=Object(s.a)(this.original).concat(Object(s.a)(t.data)),a=this.original,n=this.state,this.setState(Object(m.a)({loading:!1},le(a,n)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balcony,a=e.rooms,n=e.years,c=e.price_loc,i=q;return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(A,{filter:this.handleFilter})),r.a.createElement("div",{className:"grid-45"},r.a.createElement(V,{balcony:t,rooms:a}),r.a.createElement(re,{data:c}),r.a.createElement(Y,{data:n,opts:i}),r.a.createElement(te,{data:a})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.2de8a805.chunk.js.map