(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(e,t,a){e.exports=a(650)},283:function(e,t,a){},305:function(e,t,a){},517:function(e,t,a){},650:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(129),c=a.n(l),i=(a(283),a(182)),o=a.n(i),u=a(261),m=a(99),s=a(21),h=a(130),d=a(131),p=a(138),f=a(132),b=a(137),v=a(262),y=a.n(v),g=(a(305),function(e){if(!e.length)return null;var t=e.map(function(e){return e.price_sqm}).reduce(function(e,t){return e+t}),a=e.filter(function(e){return!e.price_sqm});return t/(e.length-a.length)}),E=a(277),_=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=[];a="balcony"===t?e.filter(function(e){return e.balcony>0}):e.filter(function(e){return e.description&&e.description.includes(t)}),n=Object(s.a)(n).concat(Object(s.a)(a))},u=a[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)o()}catch(m){l=!0,c=m}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}return n},O=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=e.filter(function(e){return e.room_count===parseInt(t)});n=Object(s.a)(n).concat(Object(s.a)(a))},u=a[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)o()}catch(m){l=!0,c=m}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}return n},j=function(e,t,a){e=t.length?t:e;var n=[],r=!0,l=!1,c=void 0;try{for(var i,o=function(){var t=i.value,a=parseInt(t),r=t.substr(4),l=[];if(r)l=e.filter(function(e){return"<"===r?e.built_year<a:e.built_year>a});else{var c=a+20;l=e.filter(function(e){return e.built_year>=a&&e.built_year<c})}n=Object(s.a)(n).concat(Object(s.a)(l))},u=a[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)o()}catch(m){l=!0,c=m}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}return n},k={loc:{name:"location",label:"Location",id:"location",placeholder:"Vallikatu"},area:[{name:"size_sqm",placeholder:"min",id:"size_sqm_min",className:"min"},{name:"size_sqm",placeholder:"max",id:"size_sqm_max",className:"max"}],aprt_price:[{name:"price",placeholder:"min",id:"price_min",className:"min"},{name:"price",placeholder:"max",id:"price_max",className:"max"}],year:[{name:"built_year",label:"< 1970",id:"1970<"},{name:"built_year",label:"1970 - 1989",id:"1970"},{name:"built_year",label:"1990 - 2009",id:"1990"},{name:"built_year",label:"> 2010",id:"2010>"}],rooms:[{name:"room_count",label:"1R",id:"1"},{name:"room_count",label:"2R",id:"2"},{name:"room_count",label:"3R",id:"3"},{name:"room_count",label:"4R",id:"4"},{name:"room_count",label:"5R",id:"5"}],opts:[{name:"options",label:"Balcony",id:"balcony"},{name:"options",label:"Terrace",id:"terassi"},{name:"options",label:"Storage",id:"vh"},{name:"options",label:"Open-kitchen",id:"avok"},{name:"options",label:"Kitchenette",id:"kk"}]},w=a(183),x=function(e,t){var a=[],n=t.location,r=t.room_count,l=t.built_year,c=t.size_sqm,i=t.price,o=t.options;return n&&(a=function(e,t){var a=t=(t=t.toLowerCase().trim()).split(" "),n=Object(E.a)(a,2),r=n[0],l=n[1];if(l)return e.filter(function(e){return e.street.toLowerCase()===r&&e.street_number.toString()===l});var c=r.length;return e.filter(function(e){return e.street.toLowerCase().substr(0,c)===r})}(e,n)),(c.min||c.max)&&(a=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||200,e.filter(function(e){return e.size_sqm>=n&&e.size_sqm<=r})}(e,a,c)),(i.min||i.max)&&(a=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||Math.pow(10,7),e.filter(function(e){return e.size_sqm*e.price_sqm>=n&&e.size_sqm*e.price_sqm<=r})}(e,a,i)),r.length&&(a=O(e,a,r)),l.length&&(a=j(e,a,l)),o.length&&(a=_(e,a,o)),a},C=function(e){for(var t=w.Object.values(e),a={},n=0;n<t.length;n++){var r=t[n];r.constructor===String?a[r]=!!r:r.constructor===Array?a[r]=!!r.length:a[r]=!(!r.min&&!r.max)}return w.Object.values(a).every(function(e){return!e})},S=function(e,t){var a=t.balcony,n=t.rooms,r=t.years,l=t.price_room,c=t.price_loc,i=function(e,t,a){for(var n=t.length,r=Object(s.a)(t),l=Object(s.a)(a),c=1;c<6;c++){var i=O(e,[],[c]),o=i.length;n?(r[c-1].value=o,l[c-1].price_sqm=g(i)):(r.push({name:"#".concat(c," room(s)"),value:o}),l.push({name:"#".concat(c," room(s)"),price_sqm:g(i)}))}return{copy_rooms:r,copy_price_room:l}}(e,n,l),o=i.copy_rooms,u=i.copy_price_room;return{balcony:function(e,t){var a=t.length,n=Object(s.a)(t),r=_(e,[],["balcony"]).length,l=e.length;return a?(n[0].value=_(e,[],["balcony"]).length,n[1].value=e.length-n[0].value):(n.push({name:"balcony",value:r}),n.push({name:"no balcony",value:l-r})),n}(e,a),rooms:o,price_room:u,years:function(e,t,a){for(var n=t.length,r=Object(s.a)(t),l=a.year,c=a.opts,i=0;i<l.length;i++){var o=j(e,[],[l[i].id]);if(n){var u=r[i],m=!0,h=!1,d=void 0;try{for(var p,f=c[Symbol.iterator]();!(m=(p=f.next()).done);m=!0)u[k=p.value.id]=_(o,[],[k]).length}catch(w){h=!0,d=w}finally{try{m||null==f.return||f.return()}finally{if(h)throw d}}}else{var b={name:l[i].label},v=!0,y=!1,g=void 0;try{for(var E,O=c[Symbol.iterator]();!(v=(E=O.next()).done);v=!0){var k;b[k=E.value.id]=_(o,[],[k]).length}}catch(w){y=!0,g=w}finally{try{v||null==O.return||O.return()}finally{if(y)throw g}}r.push(b)}}return r}(e,r,k),price_loc:function(e,t){var a=t.length,n=Object(s.a)(t),r={},l=!0,c=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(l=(o=u.next()).done);l=!0){var m=o.value,h=m.street,d=m.street_number,p=m.price_sqm,f=m.size_sqm,b="".concat(h," ").concat(d),v=Math.round(f*p);r.hasOwnProperty(b)||(r[b]=[]),r[b].push(v)}}catch(j){c=!0,i=j}finally{try{l||null==u.return||u.return()}finally{if(c)throw i}}var y=Object.values(r),g=Object.keys(r);a&&(n.length=0);for(var E=0;E<y.length;E++){var _=Math.max.apply(Math,Object(s.a)(y[E])),O=Math.min.apply(Math,Object(s.a)(y[E]));n.push({name:g[E],min_price:O,max_price:_})}return n}(e,c)}},q=a(70),F=a(82),z=(a(517),function(e){var t=e.name,a=e.id,l=e.label,c=e.checked,i=e.handleCheck;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"checkbox",name:t,id:a,checked:c,onChange:function(e){return i(e,a)}}),r.a.createElement("label",{htmlFor:a},l),r.a.createElement("br",null))}),N=function(e){var t=e.name,a=e.id,l=e.className,c=e.placeholder,i=e.label,o=e.value,u=e.onChange;if(["min","max"].includes(c)){var m=o,s=m.min,h=m.max;o="min"===c?s:h}return r.a.createElement(n.Fragment,null,i&&r.a.createElement("p",null,i),r.a.createElement("input",{type:"text",name:t,id:a&&a,className:l&&l,value:o,placeholder:c,onChange:function(e){return u(e,l)}}))},I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=e.target,r=n.name,l=n.value,c=Object(F.a)(Object(F.a)(a)).state;switch(r){case"location":a.setState(Object(q.a)({},r,l));break;default:a.setState(Object(q.a)({},r,Object(m.a)({},c[r],Object(q.a)({},t,l))))}},a.handleCheck=function(e,t){var n=e.target,r=n.name,l=n.checked,c=Object(F.a)(Object(F.a)(a)).state;if(l)a.setState(Object(q.a)({},r,Object(s.a)(c[r]).concat([t])));else{var i=Object(s.a)(c[r]),o=i.indexOf(t);i.splice(o,1),a.setState(Object(q.a)({},r,i))}},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.filter)(a.state)},a.state={location:"",room_count:[],built_year:[],size_sqm:{min:"",max:""},price:{min:"",max:""},options:[]},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=k.loc,a=k.area,l=k.aprt_price,c=k.year,i=k.rooms,o=k.opts,u=this.state,m=u.location,s=u.size_sqm,h=u.price;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(N,Object.assign({},t,{value:m,onChange:this.handleChange})),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Number of rooms:"),r.a.createElement("div",{className:"flex"},i.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Built year:"),r.a.createElement("div",null,c.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Area:"),r.a.createElement("div",{className:"grid"},a.map(function(t,a){return r.a.createElement(N,Object.assign({key:a},t,{value:s,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Price:"),r.a.createElement("div",{className:"grid"},l.map(function(t,a){return r.a.createElement(N,Object.assign({key:a},t,{value:h,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Other options:"),r.a.createElement("div",null,o.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",value:"Search data"})))}}]),t}(n.PureComponent),K=a(652),R=a(657),A=a(646),M=a(651),B=function(e){var t=e.balcony,a=e.rooms;return r.a.createElement(K.a,{width:"100%",height:300},r.a.createElement(R.a,{width:800,height:300},r.a.createElement(A.a,{isAnimationActive:!1,data:t,dataKey:"value",cx:"35%",cy:150,outerRadius:60,fill:"#8884d8",label:!0}),r.a.createElement(A.a,{isAnimationActive:!1,data:a,dataKey:"value",cx:"35%",cy:150,outerRadius:90,innerRadius:70,fill:"#82ca9d",label:!0}),r.a.createElement(M.a,null)))},D=a(653),L=a(654),P=a(179),J=a(180),W=a(647),T=a(260),V=function(e){var t=e.data,a=e.opts,n=["#17becf","#82ca9d","#FFBB28","#8884d8","#FF8042"];return r.a.createElement(K.a,{width:"100%",height:350},r.a.createElement(D.a,{width:480,height:350,data:t,margin:{top:50,right:0,left:0,bottom:0}},r.a.createElement(L.a,{strokeDasharray:"3 3"}),r.a.createElement(P.a,{dataKey:"name"}),r.a.createElement(J.a,null),r.a.createElement(M.a,null),a.map(function(e,t){return r.a.createElement(W.a,{key:t,dataKey:e.id,stackId:"a",fill:n[t]})}),r.a.createElement(T.a,{wrapperStyle:{left:"25%",display:"flex"}})))},$=a(655),G=a(648),H=function(e){var t=e.data;return r.a.createElement(K.a,{width:"100%",height:350},r.a.createElement($.a,{width:570,height:350,data:t,margin:{top:60,right:30,left:15,bottom:5}},r.a.createElement(P.a,{dataKey:"name"}),r.a.createElement(J.a,null),r.a.createElement(L.a,{strokeDasharray:"3 3"}),r.a.createElement(M.a,null),r.a.createElement(T.a,{wrapperStyle:{left:"35%"}}),r.a.createElement(G.a,{type:"monotone",dataKey:"price_sqm",stroke:"#17becf",activeDot:{r:9}})))},Q=a(656),U=a(649),X=function(e){var t=e.data;return r.a.createElement(K.a,{width:"100%",height:300},r.a.createElement(Q.a,{width:590,height:300,data:t,margin:{top:25,right:40,left:20,bottom:0}},r.a.createElement(L.a,{strokeDasharray:"3 3"}),r.a.createElement(P.a,{dataKey:"name"}),r.a.createElement(J.a,{tickFormatter:function(e){return e.toLocaleString()}}),r.a.createElement(M.a,{formatter:function(e){return e.toLocaleString()}}),r.a.createElement(U.a,{type:"monotone",dataKey:"min_price",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),r.a.createElement(U.a,{type:"monotone",dataKey:"max_price",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})))},Y=x,Z=C,ee=S,te=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleFilter=function(e){var t=Object(s.a)(a.original),n=Z(e)?t:Y(t,e);a.setState(Object(m.a)({},ee(n,a.state)))},a.state={balcony:[],rooms:[],years:[],price_room:[],price_loc:[],loading:!0},a.original=[],a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){var t,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",e.next=3,y.a.post("https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",{who_rules:"kodit.io"});case 3:t=e.sent,this.original=Object(s.a)(this.original).concat(Object(s.a)(t.data)),a=this.original,n=this.state,this.setState(Object(m.a)({loading:!1},ee(a,n)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balcony,a=e.rooms,n=e.years,l=e.price_room,c=e.price_loc,i=k.opts;return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(I,{filter:this.handleFilter})),r.a.createElement("div",null,r.a.createElement(B,{balcony:t,rooms:a}),r.a.createElement(X,{data:c}),r.a.createElement(V,{data:n,opts:i}),r.a.createElement(H,{data:l})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[278,2,1]]]);
//# sourceMappingURL=main.5a4a9e56.chunk.js.map