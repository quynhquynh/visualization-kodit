(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(e,t,a){e.exports=a(650)},283:function(e,t,a){},305:function(e,t,a){},517:function(e,t,a){},650:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(129),l=a.n(i),o=(a(283),a(182)),c=a.n(o),u=a(261),s=a(99),m=a(21),h=a(130),d=a(131),f=a(138),p=a(132),b=a(137),v=a(262),y=a.n(v),g=(a(305),function(e){if(!e.length)return null;var t=e.map(function(e){return e.price_sqm}).reduce(function(e,t){return e+t}),a=e.filter(function(e){return!e.price_sqm});return t/(e.length-a.length)}),E=a(277),_=function(e,t,a){e=t.length?t:e;var n=[],r=!0,i=!1,l=void 0;try{for(var o,c=function(){var t=o.value,a=[];a="balcony"===t?e.filter(function(e){return e.balcony>0}):e.filter(function(e){return e.description&&e.description.includes(t)}),n=Object(m.a)(n).concat(Object(m.a)(a))},u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)c()}catch(s){i=!0,l=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}return n},O=function(e,t,a){e=t.length?t:e;var n=[],r=!0,i=!1,l=void 0;try{for(var o,c=function(){var t=o.value,a=e.filter(function(e){return e.room_count===parseInt(t)});n=Object(m.a)(n).concat(Object(m.a)(a))},u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)c()}catch(s){i=!0,l=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}return n},w=function(e,t,a){e=t.length?t:e;var n=[],r=!0,i=!1,l=void 0;try{for(var o,c=function(){var t=o.value,a=parseInt(t),r=t.substr(4),i=[];if(r)i=e.filter(function(e){return"<"===r?e.built_year<a:e.built_year>a});else{var l=a+20;i=e.filter(function(e){return e.built_year>=a&&e.built_year<l})}n=Object(m.a)(n).concat(Object(m.a)(i))},u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)c()}catch(s){i=!0,l=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}return n},j={loc:{name:"location",label:"Location",id:"location",placeholder:"Vallikatu"},area:[{name:"size_sqm",placeholder:"min",id:"size_sqm_min",className:"min"},{name:"size_sqm",placeholder:"max",id:"size_sqm_max",className:"max"}],aprt_price:[{name:"price",placeholder:"min",id:"price_min",className:"min"},{name:"price",placeholder:"max",id:"price_max",className:"max"}],year:[{name:"built_year",label:"< 1970",id:"1970<"},{name:"built_year",label:"1970 - 1989",id:"1970"},{name:"built_year",label:"1990 - 2009",id:"1990"},{name:"built_year",label:"> 2010",id:"2010>"}],rooms:[{name:"room_count",label:"1R",id:"1"},{name:"room_count",label:"2R",id:"2"},{name:"room_count",label:"3R",id:"3"},{name:"room_count",label:"4R",id:"4"},{name:"room_count",label:"5R",id:"5"}],opts:[{name:"options",label:"Balcony",id:"balcony"},{name:"options",label:"Terrace",id:"terassi"},{name:"options",label:"Storage",id:"vh"},{name:"options",label:"Open-kitchen",id:"avok"},{name:"options",label:"Kitchenette",id:"kk"}]},k=a(183),x=function(e,t){var a=[],n=t.location,r=t.room_count,i=t.built_year,l=t.size_sqm,o=t.price,c=t.options;return n&&(a=function(e,t){var a=t=(t=t.toLowerCase().trim()).split(" "),n=Object(E.a)(a,2),r=n[0],i=n[1];if(i)return e.filter(function(e){return e.street.toLowerCase()===r&&e.street_number.toString()===i});var l=r.length;return e.filter(function(e){return e.street.toLowerCase().substr(0,l)===r})}(e,n)),(l.min||l.max)&&(a=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||200,e.filter(function(e){return e.size_sqm>=n&&e.size_sqm<=r})}(e,a,l)),(o.min||o.max)&&(a=function(e,t,a){e=t.length?t:e;var n=a.min,r=a.max;return n=parseInt(n)||0,r=parseInt(r)||Math.pow(10,7),e.filter(function(e){return e.size_sqm*e.price_sqm>=n&&e.size_sqm*e.price_sqm<=r})}(e,a,o)),r.length&&(a=O(e,a,r)),i.length&&(a=w(e,a,i)),c.length&&(a=_(e,a,c)),a},C=function(e){for(var t=k.Object.values(e),a={},n=0;n<t.length;n++){var r=t[n];r.constructor===String?a[r]=!!r:r.constructor===Array?a[r]=!!r.length:a[r]=!(!r.min&&!r.max)}return k.Object.values(a).every(function(e){return!e})},S=function(e,t){var a=t.balcony,n=t.rooms,r=t.years,i=t.price_room,l=t.price_loc,o=function(e,t,a){for(var n=t.length,r=Object(m.a)(t),i=Object(m.a)(a),l=1;l<6;l++){var o=O(e,[],[l]),c=o.length;n?(r[l-1].value=c,i[l-1].price_sqm=g(o)):(r.push({name:"#".concat(l," room(s)"),value:c}),i.push({name:"#".concat(l," room(s)"),price_sqm:g(o)}))}return{copy_rooms:r,copy_price_room:i}}(e,n,i),c=o.copy_rooms,u=o.copy_price_room;return{balcony:function(e,t){var a=t.length,n=Object(m.a)(t),r=_(e,[],["balcony"]).length,i=e.length;return a?(n[0].value=_(e,[],["balcony"]).length,n[1].value=e.length-n[0].value):(n.push({name:"balcony",value:r}),n.push({name:"no balcony",value:i-r})),n}(e,a),rooms:c,price_room:u,years:function(e,t,a){for(var n=t.length,r=Object(m.a)(t),i=a.year,l=a.opts,o=0;o<i.length;o++){var c=w(e,[],[i[o].id]);if(n){var u=r[o],s=!0,h=!1,d=void 0;try{for(var f,p=l[Symbol.iterator]();!(s=(f=p.next()).done);s=!0)u[j=f.value.id]=_(c,[],[j]).length}catch(k){h=!0,d=k}finally{try{s||null==p.return||p.return()}finally{if(h)throw d}}}else{var b={name:i[o].label},v=!0,y=!1,g=void 0;try{for(var E,O=l[Symbol.iterator]();!(v=(E=O.next()).done);v=!0){var j;b[j=E.value.id]=_(c,[],[j]).length}}catch(k){y=!0,g=k}finally{try{v||null==O.return||O.return()}finally{if(y)throw g}}r.push(b)}}return r}(e,r,j),price_loc:function(e,t){var a=t.length,n=Object(m.a)(t),r={},i=!0,l=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value,h=s.street,d=s.street_number,f=s.price_sqm,p=s.size_sqm,b="".concat(h," ").concat(d),v=Math.round(p*f);r.hasOwnProperty(b)||(r[b]=[]),r[b].push(v)}}catch(w){l=!0,o=w}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}var y=Object.values(r),g=Object.keys(r);a&&(n.length=0);for(var E=0;E<y.length;E++){var _=Math.max.apply(Math,Object(m.a)(y[E])),O=Math.min.apply(Math,Object(m.a)(y[E]));n.push({name:g[E],min_price:O,max_price:_})}return n}(e,l)}},q=a(70),F=a(82),z=(a(517),function(e){var t=e.name,a=e.id,i=e.label,l=e.checked,o=e.handleCheck;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"checkbox",name:t,id:a,checked:l,onChange:function(e){return o(e,a)}}),r.a.createElement("label",{htmlFor:a},i),r.a.createElement("br",null))}),A=function(e){var t=e.name,a=e.id,i=e.className,l=e.placeholder,o=e.label,c=e.value,u=e.onChange;if(["min","max"].includes(l)){var s=c,m=s.min,h=s.max;c="min"===l?m:h}return r.a.createElement(n.Fragment,null,o&&r.a.createElement("p",null,o),r.a.createElement("input",{type:"text",name:t,id:a&&a,className:i&&i,value:c,placeholder:l,onChange:function(e){return u(e,i)}}))},N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e,t){var n=e.target,r=n.name,i=n.value,l=Object(F.a)(Object(F.a)(a)).state;switch(r){case"location":a.setState(Object(q.a)({},r,i));break;default:a.setState(Object(q.a)({},r,Object(s.a)({},l[r],Object(q.a)({},t,i))))}},a.handleCheck=function(e,t){var n=e.target,r=n.name,i=n.checked,l=Object(F.a)(Object(F.a)(a)).state;if(i)a.setState(Object(q.a)({},r,Object(m.a)(l[r]).concat([t])));else{var o=Object(m.a)(l[r]),c=o.indexOf(t);o.splice(c,1),a.setState(Object(q.a)({},r,o))}},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.filter)(a.state)},a.state={location:"",room_count:[],built_year:[],size_sqm:{min:"",max:""},price:{min:"",max:""},options:[]},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=j.loc,a=j.area,i=j.aprt_price,l=j.year,o=j.rooms,c=j.opts,u=this.state,s=u.location,m=u.size_sqm,h=u.price;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(A,Object.assign({},t,{value:s,onChange:this.handleChange})),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Number of rooms:"),r.a.createElement("div",{className:"flex"},o.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Built year:"),r.a.createElement("div",null,l.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Area:"),r.a.createElement("div",{className:"grid"},a.map(function(t,a){return r.a.createElement(A,Object.assign({key:a},t,{value:m,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Price:"),r.a.createElement("div",{className:"grid"},i.map(function(t,a){return r.a.createElement(A,Object.assign({key:a},t,{value:h,onChange:e.handleChange}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Other options:"),r.a.createElement("div",null,c.map(function(t,a){return r.a.createElement(z,Object.assign({key:a},t,{handleCheck:e.handleCheck}))}))),r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",value:"Search data"})))}}]),t}(n.PureComponent),R=a(652),I=a(657),K=a(646),M=a(651),L=Math.PI/180,B=function(e){var t=e.cx,a=e.cy,n=e.midAngle,i=e.innerRadius,l=e.outerRadius,o=e.percent,c=(e.index,i+.5*(l-i)),u=t+c*Math.cos(-n*L),s=a+c*Math.sin(-n*L),m=parseInt((100*o).toFixed(0)),h=m?"".concat(m,"%"):"";return r.a.createElement("text",{x:u,y:s,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},h)},W=function(e){var t=e.balcony,a=e.rooms;return r.a.createElement(R.a,{width:"100%",height:300},r.a.createElement(I.a,{width:800,height:300},r.a.createElement(K.a,{isAnimationActive:!1,data:t,dataKey:"value",outerRadius:70,fill:"#8884d8",labelLine:!1,label:B}),r.a.createElement(K.a,{isAnimationActive:!1,data:a,dataKey:"value",outerRadius:95,innerRadius:75,fill:"#82ca9d",label:!0}),r.a.createElement(M.a,null)))},D=a(653),P=a(654),T=a(179),U=a(180),J=a(647),V=a(260),$=function(e){var t=e.data,a=e.opts,n=["#17becf","#82ca9d","#FFBB28","#8884d8","#FF8042"];return r.a.createElement(R.a,{width:"100%",height:350},r.a.createElement(D.a,{width:480,height:350,data:t,margin:{top:50,right:0,left:0,bottom:0}},r.a.createElement(P.a,{strokeDasharray:"3 3"}),r.a.createElement(T.a,{dataKey:"name"}),r.a.createElement(U.a,null),r.a.createElement(M.a,null),a.map(function(e,t){return r.a.createElement(J.a,{key:t,dataKey:e.id,stackId:"a",fill:n[t]})}),r.a.createElement(V.a,{wrapperStyle:{left:"25%",display:"flex"}})))},G=a(655),H=a(648),Q=function(e){var t=e.data;return r.a.createElement(R.a,{width:"100%",height:350},r.a.createElement(G.a,{width:570,height:350,data:t,margin:{top:60,right:30,left:15,bottom:5}},r.a.createElement(T.a,{dataKey:"name"}),r.a.createElement(U.a,null),r.a.createElement(P.a,{strokeDasharray:"3 3"}),r.a.createElement(M.a,null),r.a.createElement(V.a,{wrapperStyle:{left:"35%"}}),r.a.createElement(H.a,{type:"monotone",dataKey:"price_sqm",stroke:"#17becf",activeDot:{r:9}})))},X=a(656),Y=a(649),Z=function(e){var t=e.data;return r.a.createElement(R.a,{width:"100%",height:300},r.a.createElement(X.a,{width:590,height:300,data:t,margin:{top:25,right:40,left:20,bottom:0}},r.a.createElement(P.a,{strokeDasharray:"3 3"}),r.a.createElement(T.a,{dataKey:"name"}),r.a.createElement(U.a,{tickFormatter:function(e){return e.toLocaleString()}}),r.a.createElement(M.a,{formatter:function(e){return e.toLocaleString()}}),r.a.createElement(Y.a,{type:"monotone",dataKey:"min_price",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),r.a.createElement(Y.a,{type:"monotone",dataKey:"max_price",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})))},ee=x,te=C,ae=S,ne=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this,e))).handleFilter=function(e){var t=Object(m.a)(a.original),n=te(e)?t:ee(t,e);a.setState(Object(s.a)({},ae(n,a.state)))},a.state={balcony:[],rooms:[],years:[],price_room:[],price_loc:[],loading:!0},a.original=[],a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",e.next=3,y.a.post("https://cc677kr6sc.execute-api.eu-central-1.amazonaws.com/data",{who_rules:"kodit.io"});case 3:t=e.sent,this.original=Object(m.a)(this.original).concat(Object(m.a)(t.data)),a=this.original,n=this.state,this.setState(Object(s.a)({loading:!1},ae(a,n)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balcony,a=e.rooms,n=e.years,i=e.price_room,l=e.price_loc,o=j.opts;return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(N,{filter:this.handleFilter})),r.a.createElement("div",null,r.a.createElement(W,{balcony:t,rooms:a}),r.a.createElement(Z,{data:l}),r.a.createElement($,{data:n,opts:o}),r.a.createElement(Q,{data:i})))}}]),t}(n.Component),re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/visualization-kodit",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/visualization-kodit","/service-worker.js");re?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ie(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ie(t,e)})}}()}},[[278,2,1]]]);
//# sourceMappingURL=main.7305c469.chunk.js.map